"use strict";(self.webpackChunktresorerie_management=self.webpackChunktresorerie_management||[]).push([[62],{9062:(e,t,i)=>{i.r(t),i.d(t,{default:()=>k});var s=i(5043),a=i(3488),n=i.n(a),r=i(4999),o=i.n(r),c=i(9252),l=i(2220),d=i(1637),h=i(6446),m=i(5865),p=i(8903),x=i(2110),y=i(6494),j=i(579);function k(e){let{fetchItems:t}=e;const[i,a]=(0,s.useState)([]),[r,k]=(0,s.useState)([]),[u,b]=(0,s.useState)([]),[A,f]=(0,s.useState)([]),[v,g]=(0,s.useState)([]),[S,R]=(0,s.useState)([]),[N,T]=(0,s.useState)("Safe"),[w,I]=(0,s.useState)(0),[F,O]=(0,s.useState)([]),[D,C]=(0,s.useState)(!0);(0,s.useEffect)((()=>{(async()=>{C(!0);const e=await t();a(e),B(e),C(!1)})()}),[t]);const B=e=>{const t=e.reduce(((e,t)=>(e[t.severity]=(e[t.severity]||0)+1,e)),{});k(Object.keys(t).map((i=>({name:i,y:t[i],riskNames:e.filter((e=>e.severity===i)).map((e=>e.riskName)).join(", ")}))));const i=e.reduce(((e,t)=>(e[t.riskType]=(e[t.riskType]||0)+1,e)),{});b(Object.keys(i).map((t=>({name:t,y:i[t],riskNames:e.filter((e=>e.riskType===t)).map((e=>e.riskName)).join(", ")}))));const s=e.reduce(((e,t)=>{const i=new Date(t.createdDate).getMonth()+1;return e[i]=(e[i]||0)+1,e}),{});f(Object.keys(s).map((e=>({name:`Month ${e}`,y:s[e]}))));const a=e.reduce(((e,t)=>{const i=Number(t.financialImpact)||0;return e.total+=i,e.breakdown.push({name:t.riskName,y:i}),e}),{total:0,breakdown:[]});I(a.total),g(a.breakdown);const n=e.reduce(((e,t)=>(e[t.owner]=(e[t.owner]||0)+1,e)),{});R(Object.keys(n).map((e=>({name:e,y:n[e]}))));const r=e.filter((e=>"High"===e.severity||"Critical"===e.severity));T(r.length>10?"Threatened":"Safe");const o=e.sort(((e,t)=>("Critical"===t.severity?1:0)-("Critical"===e.severity?1:0)||(Number(t.financialImpact)||0)-(Number(e.financialImpact)||0))).slice(0,5);O(o)},$={chart:{type:"pie"},title:{text:"Risk Severity Distribution"},tooltip:{pointFormat:"{point.name}: <b>{point.y}</b><br/>Risks: {point.riskNames}"},series:[{name:"Risks",colorByPoint:!0,data:r}]},W={chart:{type:"pie"},title:{text:"Risk Type Distribution"},tooltip:{pointFormat:"{point.name}: <b>{point.y}</b><br/>Risks: {point.riskNames}"},series:[{name:"Risks",colorByPoint:!0,data:u}]},z={chart:{type:"line"},title:{text:"Risk Trends Over Time"},xAxis:{categories:A.map((e=>e.name))},series:[{name:"Number of Risks",data:A.map((e=>e.y))}]},M={chart:{type:"column"},title:{text:"Financial Impact of Risks"},tooltip:{pointFormat:"<b>{point.name}</b>: ${point.y:.2f}"},series:[{name:"Financial Impact",data:v}]},P={chart:{type:"bar"},title:{text:"Risk Ownership Distribution"},series:[{name:"Risks",data:S}]};return(0,j.jsxs)(c.A,{maxWidth:"xl",sx:{paddingTop:3,paddingBottom:7},children:[(0,j.jsx)(l.A,{sx:{color:"#fff",zIndex:e=>e.zIndex.drawer+1},open:D,children:(0,j.jsx)(d.A,{color:"inherit"})}),(0,j.jsxs)(h.A,{sx:{padding:4},children:[(0,j.jsx)(m.A,{variant:"h4",gutterBottom:!0,children:"Risk Analysis Dashboard"}),(0,j.jsxs)(p.Ay,{container:!0,spacing:4,children:[(0,j.jsx)(p.Ay,{item:!0,xs:12,md:4,children:(0,j.jsx)(x.A,{children:(0,j.jsxs)(y.A,{children:[(0,j.jsx)(m.A,{variant:"h6",children:"Overall Risk Level"}),(0,j.jsx)(m.A,{variant:"h4",color:"Safe"===N?"green":"red",sx:{fontWeight:"bold"},children:N}),(0,j.jsx)(m.A,{variant:"body2",children:"Safe"===N?"The company is currently in a safe state with manageable risks.":"The company is threatened by high or critical risks."})]})})}),(0,j.jsx)(p.Ay,{item:!0,xs:12,md:4,children:(0,j.jsx)(x.A,{children:(0,j.jsxs)(y.A,{children:[(0,j.jsx)(m.A,{variant:"h6",children:"Total Financial Impact"}),(0,j.jsxs)(m.A,{variant:"h4",color:"blue",sx:{fontWeight:"bold"},children:["$",w.toFixed(2)]}),(0,j.jsx)(m.A,{variant:"body2",children:"This represents the total financial exposure due to identified risks."})]})})}),(0,j.jsx)(p.Ay,{item:!0,xs:12,md:4,children:(0,j.jsx)(x.A,{children:(0,j.jsxs)(y.A,{children:[(0,j.jsx)(m.A,{variant:"h6",children:"Top 5 Risks"}),(0,j.jsx)("ol",{children:F.map((e=>(0,j.jsx)("li",{children:(0,j.jsxs)(m.A,{variant:"body2",children:[e.riskName," - Severity: ",e.severity," - Impact: $",Number(e.financialImpact||0).toFixed(2)]})},e.riskId)))})]})})}),(0,j.jsx)(p.Ay,{item:!0,xs:12,md:6,children:(0,j.jsx)(o(),{highcharts:n(),options:$})}),(0,j.jsx)(p.Ay,{item:!0,xs:12,md:6,children:(0,j.jsx)(o(),{highcharts:n(),options:W})}),(0,j.jsx)(p.Ay,{item:!0,xs:12,md:12,children:(0,j.jsx)(o(),{highcharts:n(),options:z})}),(0,j.jsx)(p.Ay,{item:!0,xs:12,md:12,children:(0,j.jsx)(o(),{highcharts:n(),options:M})}),(0,j.jsx)(p.Ay,{item:!0,xs:12,md:12,children:(0,j.jsx)(o(),{highcharts:n(),options:P})})]})]})]})}}}]);
//# sourceMappingURL=62.758847eb.chunk.js.map