"use strict";(self.webpackChunktresorerie_management=self.webpackChunktresorerie_management||[]).push([[72],{8072:(e,t,i)=>{i.r(t),i.d(t,{default:()=>y});var s=i(5043),n=i(3488),o=i.n(n),r=i(4999),a=i.n(r),c=i(9252),d=i(6446),l=i(5865),h=i(8903),m=i(2110),p=i(6494),x=i(1637),u=i(2220),v=i(579);function y(e){let{fetchItems:t}=e;const[i,n]=(0,s.useState)([]),[r,y]=(0,s.useState)([]),[j,b]=(0,s.useState)([]),[A,g]=(0,s.useState)([]),[f,I]=(0,s.useState)([]),[T,N]=(0,s.useState)([]),[D,S]=(0,s.useState)(0),[V,k]=(0,s.useState)(0),[M,C]=(0,s.useState)(!0);(0,s.useEffect)((()=>{(async()=>{C(!0);const e=await t();n(e),F(e),C(!1)})()}),[t]);const F=e=>{const t=e.reduce(((e,t)=>(e[t.invoiceType]=(e[t.invoiceType]||0)+1,e)),{});y(Object.keys(t).map((i=>({name:i,y:t[i],invoiceNames:e.filter((e=>e.invoiceType===i)).map((e=>e.providerDetails)).join(", ")}))));const i=e.reduce(((e,t)=>(e[t.invoiceCategory]=(e[t.invoiceCategory]||0)+1,e)),{});b(Object.keys(i).map((t=>({name:t,y:i[t],invoiceNames:e.filter((e=>e.invoiceCategory===t)).map((e=>e.providerDetails)).join(", ")}))));const s=e.reduce(((e,t)=>(e[t.paymentMethod]=(e[t.paymentMethod]||0)+1,e)),{});g(Object.keys(s).map((t=>({name:t,y:s[t],invoiceNames:e.filter((e=>e.paymentMethod===t)).map((e=>e.providerDetails)).join(", ")}))));const n=e.reduce(((e,t)=>{const i=new Date(t.issuedAt).getMonth()+1;return e[i]=(e[i]||0)+1,e}),{});I(Object.keys(n).map((e=>({name:`Month ${e}`,y:n[e]}))));const o=e.reduce(((e,t)=>{const i=Number(t.contractValue)||0;return"issued"===t.invoiceType?e.issued+=i:e.received+=i,e}),{issued:0,received:0});S(o.issued),k(o.received);const r=e.sort(((e,t)=>Number(t.contractValue)-Number(e.contractValue))).slice(0,5);N(r)},P={chart:{type:"pie"},title:{text:"Invoice Type Distribution"},tooltip:{pointFormat:"{point.name}: <b>{point.y}</b><br/>Providers: {point.invoiceNames}"},series:[{name:"Invoices",colorByPoint:!0,data:r}]},w={chart:{type:"pie"},title:{text:"Invoice Category Distribution"},tooltip:{pointFormat:"{point.name}: <b>{point.y}</b><br/>Providers: {point.invoiceNames}"},series:[{name:"Categories",colorByPoint:!0,data:j}]},B={chart:{type:"column"},title:{text:"Payment Method Distribution"},tooltip:{pointFormat:"{point.name}: <b>{point.y}</b> invoices"},series:[{name:"Payment Methods",data:A}]},O={chart:{type:"line"},title:{text:"Monthly Invoice Trends"},xAxis:{categories:f.map((e=>e.name))},series:[{name:"Number of Invoices",data:f.map((e=>e.y))}]};return(0,v.jsxs)(c.A,{maxWidth:"xl",sx:{paddingTop:3,paddingBottom:7},children:[(0,v.jsx)(u.A,{sx:{color:"#fff",zIndex:e=>e.zIndex.drawer+1},open:M,children:(0,v.jsx)(x.A,{color:"inherit"})}),(0,v.jsxs)(d.A,{sx:{padding:4},children:[(0,v.jsx)(l.A,{variant:"h4",gutterBottom:!0,children:"Invoice Analysis Dashboard"}),(0,v.jsxs)(h.Ay,{container:!0,spacing:4,children:[(0,v.jsx)(h.Ay,{item:!0,xs:12,md:4,children:(0,v.jsx)(m.A,{children:(0,v.jsxs)(p.A,{children:[(0,v.jsx)(l.A,{variant:"h6",children:"Total Issued Invoice Value"}),(0,v.jsxs)(l.A,{variant:"h4",color:"green",sx:{fontWeight:"bold"},children:["$",D.toFixed(2)]}),(0,v.jsx)(l.A,{variant:"body2",children:"This represents the total value of all issued invoices."})]})})}),(0,v.jsx)(h.Ay,{item:!0,xs:12,md:4,children:(0,v.jsx)(m.A,{children:(0,v.jsxs)(p.A,{children:[(0,v.jsx)(l.A,{variant:"h6",children:"Total Received Invoice Value"}),(0,v.jsxs)(l.A,{variant:"h4",color:"blue",sx:{fontWeight:"bold"},children:["$",V.toFixed(2)]}),(0,v.jsx)(l.A,{variant:"body2",children:"This represents the total value of all received invoices."})]})})}),(0,v.jsx)(h.Ay,{item:!0,xs:12,md:4,children:(0,v.jsx)(m.A,{children:(0,v.jsxs)(p.A,{children:[(0,v.jsx)(l.A,{variant:"h6",children:"Top 5 Vendors by Invoice Value"}),(0,v.jsx)("ol",{children:T.map((e=>(0,v.jsx)("li",{children:(0,v.jsxs)(l.A,{variant:"body2",children:[e.providerDetails," - Value: $",Number(e.contractValue).toFixed(2)]})},e.id)))})]})})}),(0,v.jsx)(h.Ay,{item:!0,xs:12,md:6,children:(0,v.jsx)(a(),{highcharts:o(),options:P})}),(0,v.jsx)(h.Ay,{item:!0,xs:12,md:6,children:(0,v.jsx)(a(),{highcharts:o(),options:w})}),(0,v.jsx)(h.Ay,{item:!0,xs:12,md:6,children:(0,v.jsx)(a(),{highcharts:o(),options:B})}),(0,v.jsx)(h.Ay,{item:!0,xs:12,md:6,children:(0,v.jsx)(a(),{highcharts:o(),options:O})})]})]})]})}}}]);
//# sourceMappingURL=72.389b3112.chunk.js.map