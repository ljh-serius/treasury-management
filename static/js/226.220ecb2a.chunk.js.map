{"version":3,"file":"static/js/226.220ecb2a.chunk.js","mappings":"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","sources":["components/Management/Entities.js","utils/firebaseCrudHelpers.js"],"sourcesContent":["import {\r\n    fetchDocuments,\r\n    addDocument,\r\n    updateDocument,\r\n    deleteDocument,\r\n    fetchDocumentsBySelectValue,\r\n    fetchDocumentsByFieldValue,\r\n    fetchDocumentById\r\n} from '../../utils/firebaseCrudHelpers';\r\n\r\nconst organizationId = JSON.parse(localStorage.getItem('userData')).organizationId;\r\n\r\nconst getEntitiesOptions = async (types) => {\r\n  console.log(\"launched NOW\")\r\n  return (await fetchItems()).filter((entity) => {\r\n    return types.includes(entity.type);\r\n  }).map((entity) => {\r\n    return {\r\n      id: entity.id,\r\n      label: entity.name\r\n    }\r\n  });\r\n}\r\n\r\nexport const fieldsConfig = {\r\n  entityId: { label: 'Cost ID', type: 'text', faker: 'datatype.uuid' },\r\n  entityName: { label: 'Cost Name', type: 'text', faker: 'name.fullName' },\r\n  name: { label: 'name', type: 'text', faker: 'company.name' },\r\n  type: {\r\n    label: 'Type',\r\n    type: 'select',\r\n    options: [\r\n      {\r\n        id: 'store',\r\n        label: 'Store'\r\n      },\r\n      {\r\n        id: 'agency',\r\n        label: 'Agency'\r\n      },\r\n      {\r\n        id: 'department',\r\n        label: 'Department'\r\n      },\r\n      {\r\n        id: 'service',\r\n        label: 'Service'\r\n      },\r\n      {\r\n        id: 'organization',\r\n        label: 'Organization'\r\n      },\r\n    ],\r\n    multiple: false,\r\n    faker: 'random.arrayElement'\r\n  },\r\n  entityId: { label: 'Entity ID', type: 'text', faker: 'datatype.uuid' },\r\n  parentId: {\r\n    label: 'Parent Entity ID',\r\n    type: 'select',\r\n    options: await getEntitiesOptions(['store', 'agency', 'department', 'service', 'organization']), // Populated with relevant parent entities\r\n    multiple: true,\r\n    faker: 'random.arrayElement',\r\n    refreshOptions: async () => {\r\n        return await getEntitiesOptions(['store', 'agency', 'department', 'service', 'organization']);\r\n    }\r\n  },\r\n  storeId: {\r\n    label: 'Parent Entity ID',\r\n    type: 'select',\r\n    options: await getEntitiesOptions(['store']), // Populated with relevant parent entities\r\n    multiple: true,\r\n    faker: 'random.arrayElement',\r\n    refreshOptions: async () => {\r\n      return await getEntitiesOptions(['store']);\r\n    }\r\n  },\r\n  agencyId: {\r\n    label: 'Parent Entity ID',\r\n    type: 'select',\r\n    options: await getEntitiesOptions(['agency']), // Populated with relevant parent entities\r\n    multiple: true,\r\n    faker: 'random.arrayElement',\r\n    refreshOptions: async () => {\r\n      return await getEntitiesOptions(['agency']);\r\n    }\r\n  },\r\n  departmentId: {\r\n    label: 'Parent Entity ID',\r\n    type: 'select',\r\n    options: await getEntitiesOptions(['department']), // Populated with relevant parent entities\r\n    multiple: true,\r\n    faker: 'random.arrayElement',\r\n    refreshOptions: async () => {\r\n      return await getEntitiesOptions(['department']);\r\n    }\r\n  },\r\n  serviceId: {\r\n    label: 'Parent Entity ID',\r\n    type: 'select',\r\n    options: await getEntitiesOptions(['service']), // Populated with relevant parent entities\r\n    multiple: true,\r\n    faker: 'random.arrayElement',\r\n    refreshOptions: async () => {\r\n      return await getEntitiesOptions(['service']);\r\n    }\r\n  },\r\n  orgnizationId: {\r\n    label: 'Parent Entity ID',\r\n    type: 'select',\r\n    options: await getEntitiesOptions(['organization']), // Populated with relevant parent entities\r\n    multiple: true,\r\n    faker: 'random.arrayElement',\r\n    refreshOptions: async () => {\r\n      return await getEntitiesOptions(['organization']);\r\n    }\r\n  },\r\n  locationId: { label: 'Location ID', type: 'text', faker: 'datatype.uuid' },\r\n  regionId: { label: 'Region ID', type: 'text', faker: 'datatype.uuid' },\r\n  countryId: { label: 'Country ID', type: 'text', faker: 'address.countryCode' },\r\n  managerId: {\r\n    label: 'Manager ID',\r\n    type: 'select',\r\n    options: [], // Populated with relevant managers\r\n    multiple: false,\r\n    faker: 'random.arrayElement'\r\n  },\r\n  status: {\r\n    label: 'Status',\r\n    type: 'select',\r\n    options: [\r\n      { id: 'active', label: 'Active' },\r\n      { id: 'inactive', label: 'Inactive' }\r\n    ],\r\n    faker: 'random.arrayElement'\r\n  },\r\n  creationDate: { label: 'Creation Date', type: 'date', faker: 'date.past' },\r\n  modifiedDate: { label: 'Modified Date', type: 'date', faker: 'date.recent' },\r\n  notes: { label: 'Notes', type: 'text', faker: 'lorem.paragraph' },\r\n};\r\n\r\nexport const headCells = Object.keys(fieldsConfig).map(key => ({\r\n  id: key,\r\n  label: fieldsConfig[key].label,\r\n}));\r\n\r\nexport const entityName = 'Entities';\r\n\r\nexport async function fetchItems() {\r\n    return await fetchDocuments(organizationId, 'entities');\r\n}\r\n\r\nexport const addItem = (item) => addDocument(organizationId, 'entities', item);\r\nexport const updateItem = (id, item) => updateDocument(organizationId, 'entities', id, item);\r\nexport const deleteItem = (id) => deleteDocument(organizationId, 'entities', id);\r\n\r\n  \r\nexport async function fetchItemById(id) {\r\n  return await fetchDocumentById(organizationId, 'entities', id);\r\n}\r\n","import { db } from './firebaseConfig'; // Assuming you have a Firebase config file\r\nimport { collection, getDocs, addDoc, updateDoc, deleteDoc, doc, query, where, getDoc } from 'firebase/firestore';\r\n\r\n// Function to fetch documents specific to an organization from a subcollection\r\nexport const fetchDocuments = async (organizationId, subcollectionName) => {\r\n  try {\r\n    const subcollectionRef = collection(db, 'organizations', organizationId, subcollectionName);\r\n    const snapshot = await getDocs(subcollectionRef);\r\n    const documentsList = snapshot.docs.map(doc => ({ id: doc.id, ...doc.data() }));\r\n    return documentsList;\r\n  } catch (error) {\r\n    console.error(`Error fetching documents from ${subcollectionName}:`, error);\r\n    return [];\r\n  }\r\n};\r\n\r\n// Function to add a new document linked to an organization in a subcollection\r\nexport const addDocument = async (organizationId, subcollectionName, documentData) => {\r\n  try {\r\n    documentData.organizationId = organizationId;\r\n    const subcollectionRef = collection(db, 'organizations', organizationId, subcollectionName);\r\n    const docRef = await addDoc(subcollectionRef, documentData);\r\n    return docRef.id; // Return the ID of the newly created document\r\n  } catch (error) {\r\n    console.error(`Error adding document to ${subcollectionName}:`, error);\r\n    throw new Error(`Could not add document to ${subcollectionName}`);\r\n  }\r\n};\r\n\r\n// Function to update an existing document in a subcollection\r\nexport const updateDocument = async (organizationId, subcollectionName, documentId, documentData) => {\r\n  try {\r\n    const docRef = doc(db, 'organizations', organizationId, subcollectionName, documentId);\r\n    await updateDoc(docRef, documentData);\r\n  } catch (error) {\r\n    console.error(`Error updating document in ${subcollectionName}:`, error);\r\n    throw new Error(`Could not update document in ${subcollectionName}`);\r\n  }\r\n};\r\n\r\n// Function to delete a document from a subcollection\r\nexport const deleteDocument = async (organizationId, subcollectionName, documentId) => {\r\n  try {\r\n    const docRef = doc(db, 'organizations', organizationId, subcollectionName, documentId);\r\n    await deleteDoc(docRef);\r\n  } catch (error) {\r\n    console.error(`Error deleting document from ${subcollectionName}:`, error);\r\n    throw new Error(`Could not delete document from ${subcollectionName}`);\r\n  }\r\n};\r\n\r\n\r\nexport const fetchDocumentsBySelectValue = async (organizationId, relativeCollection, foreignKey, foreignValue) => {\r\n  try {\r\n    const subcollectionRef = collection(db, 'organizations', organizationId, relativeCollection);\r\n    \r\n    // Create a query against the collection\r\n    const q = query(subcollectionRef, where(foreignKey, 'array-contains', foreignValue));\r\n    \r\n    // Execute the query and get the documents\r\n    const snapshot = await getDocs(q);\r\n    const documentsList = snapshot.docs.map(doc => ({ id: doc.id, ...doc.data() }));\r\n\r\n    return documentsList;\r\n  } catch (error) {\r\n    console.error(`Error fetching documents from ${relativeCollection}:`, error);\r\n    return [];\r\n  }\r\n}\r\n\r\nexport const fetchDocumentsByFieldValue = async (organizationId, relativeCollection, fieldName, fieldValue) => {\r\n  try {\r\n    const subcollectionRef = collection(db, 'organizations', organizationId, relativeCollection);\r\n    \r\n    // Create a query against the collection\r\n    const q = query(subcollectionRef, where(fieldName, '==', fieldValue));\r\n    \r\n    // Execute the query and get the documents\r\n    const snapshot = await getDocs(q);\r\n    const documentsList = snapshot.docs.map(doc => ({ id: doc.id, ...doc.data() }));\r\n\r\n    return documentsList;\r\n  } catch (error) {\r\n    console.error(`Error fetching documents from ${relativeCollection}:`, error);\r\n    return [];\r\n  }\r\n}\r\nexport const fetchDocumentById = async (organizationId, subcollectionName, documentId) => {\r\n  console.log(\"Fetching document with ID:\", documentId);\r\n  console.log(\"In subcollection:\", subcollectionName);\r\n  console.log(\"Under organization ID:\", organizationId);\r\n\r\n  try {\r\n    const docRef = doc(db, 'organizations', organizationId, subcollectionName, documentId);\r\n    console.log(\"Document Reference:\", docRef.path); // Log the path being queried\r\n\r\n    const docSnap = await getDoc(docRef);\r\n\r\n    if (docSnap.exists()) {\r\n      console.log(\"Document data:\", docSnap.data()); // Log the retrieved data\r\n      return { id: docSnap.id, ...docSnap.data() };\r\n    } else {\r\n      console.error(`No document found with ID ${documentId} in ${subcollectionName}`);\r\n      return null;\r\n    }\r\n  } catch (error) {\r\n    console.error(`Error fetching document with ID ${documentId} from ${subcollectionName}:`, error);\r\n    return null;\r\n  }\r\n};\r\n"],"names":["organizationId","JSON","parse","localStorage","getItem","getEntitiesOptions","async","console","log","fetchItems","filter","entity","types","includes","type","map","id","label","name","fieldsConfig","entityId","faker","entityName","options","multiple","parentId","refreshOptions","storeId","agencyId","departmentId","serviceId","orgnizationId","locationId","regionId","countryId","managerId","status","creationDate","modifiedDate","notes","headCells","Object","keys","key","fetchDocuments","addItem","item","addDocument","updateItem","updateDocument","deleteItem","deleteDocument","fetchItemById","fetchDocumentById","subcollectionName","subcollectionRef","collection","db","snapshot","getDocs","docs","doc","data","error","documentData","addDoc","Error","documentId","docRef","updateDoc","deleteDoc","fetchDocumentsBySelectValue","relativeCollection","foreignKey","foreignValue","q","query","where","fetchDocumentsByFieldValue","fieldName","fieldValue","path","docSnap","getDoc","exists"],"sourceRoot":""}