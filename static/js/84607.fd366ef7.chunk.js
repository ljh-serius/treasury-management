"use strict";(self.webpackChunktresorerie_management=self.webpackChunktresorerie_management||[]).push([[84607],{84607:(e,t,s)=>{s.r(t),s.d(t,{default:()=>A});var n=s(65043),a=s(43488),o=s.n(a),r=s(44999),i=s.n(r),c=s(19252),d=s(96446),l=s(85865),h=s(68903),x=s(12110),u=s(26494),m=s(81637),j=s(12220),p=s(70579);function A(e){let{fetchItems:t}=e;const[s,a]=(0,n.useState)([]),[r,A]=(0,n.useState)([]),[y,g]=(0,n.useState)([]),[D,f]=(0,n.useState)([]),[b,v]=(0,n.useState)([]),[S,w]=(0,n.useState)(0),[P,C]=(0,n.useState)(0),[k,O]=(0,n.useState)(0),[W,T]=(0,n.useState)(0),[B,F]=(0,n.useState)(!0);(0,n.useEffect)((()=>{(async()=>{F(!0);const e=await t();a(e),I(e),F(!1)})()}),[t]);const I=e=>{w(e.length);const t=e.reduce(((e,t)=>("yes"===t.isClosed?e.closed+=1:e.open+=1,e)),{open:0,closed:0});C(t.open),O(t.closed),A([{name:"Open",y:t.open},{name:"Closed",y:t.closed}]);const s=e.reduce(((e,t)=>{const s=new Date(t.startDate);return e+(new Date(t.endDate)-s)/864e5}),0);T(s/e.length);const n=e.reduce(((e,t)=>{const s=new Date(t.startDate),n=(new Date(t.endDate)-s)/864e5;return"yes"===t.isClosed?(e.closed.totalDuration+=n,e.closed.count+=1):(e.open.totalDuration+=n,e.open.count+=1),e}),{open:{totalDuration:0,count:0},closed:{totalDuration:0,count:0}});g([{name:"Open",y:n.open.totalDuration/n.open.count||0},{name:"Closed",y:n.closed.totalDuration/n.closed.count||0}]);const a=e.reduce(((e,t)=>{const s=new Date(t.startDate).getMonth()+1;return e[s]=(e[s]||0)+1,e}),{});f(Object.keys(a).map((e=>({name:`Month ${e}`,y:a[e]}))));const o=e.reduce(((e,t)=>(t.tags.forEach((t=>{e[t]=(e[t]||0)+1})),e)),{});v(Object.keys(o).map((e=>({name:e,y:o[e]}))))},M={chart:{type:"pie"},title:{text:"Periods by Status"},series:[{name:"Status",colorByPoint:!0,data:r}]},z={chart:{type:"bar"},title:{text:"Average Duration of Fiscal Periods"},series:[{name:"Average Duration (Days)",data:y}]},E={chart:{type:"column"},title:{text:"Number of Periods by Month"},xAxis:{categories:D.map((e=>e.name))},series:[{name:"Number of Periods",data:D.map((e=>e.y))}]},N={chart:{type:"column"},title:{text:"Tags Distribution"},series:[{name:"Tags",data:b}]};return(0,p.jsxs)(c.A,{maxWidth:"xl",sx:{paddingTop:3,paddingBottom:7},children:[(0,p.jsx)(j.A,{sx:{color:"#fff",zIndex:e=>e.zIndex.drawer+1},open:B,children:(0,p.jsx)(m.A,{color:"inherit"})}),(0,p.jsxs)(d.A,{sx:{padding:4},children:[(0,p.jsx)(l.A,{variant:"h4",gutterBottom:!0,children:"Fiscal Periods Dashboard"}),(0,p.jsxs)(h.Ay,{container:!0,spacing:4,children:[(0,p.jsx)(h.Ay,{item:!0,xs:12,md:3,children:(0,p.jsx)(x.A,{children:(0,p.jsxs)(u.A,{children:[(0,p.jsx)(l.A,{variant:"h6",children:"Total Periods"}),(0,p.jsx)(l.A,{variant:"h4",color:"green",sx:{fontWeight:"bold"},children:S})]})})}),(0,p.jsx)(h.Ay,{item:!0,xs:12,md:3,children:(0,p.jsx)(x.A,{children:(0,p.jsxs)(u.A,{children:[(0,p.jsx)(l.A,{variant:"h6",children:"Open Periods"}),(0,p.jsx)(l.A,{variant:"h4",color:"blue",sx:{fontWeight:"bold"},children:P})]})})}),(0,p.jsx)(h.Ay,{item:!0,xs:12,md:3,children:(0,p.jsx)(x.A,{children:(0,p.jsxs)(u.A,{children:[(0,p.jsx)(l.A,{variant:"h6",children:"Closed Periods"}),(0,p.jsx)(l.A,{variant:"h4",color:"orange",sx:{fontWeight:"bold"},children:k})]})})}),(0,p.jsx)(h.Ay,{item:!0,xs:12,md:3,children:(0,p.jsx)(x.A,{children:(0,p.jsxs)(u.A,{children:[(0,p.jsx)(l.A,{variant:"h6",children:"Average Duration (Days)"}),(0,p.jsx)(l.A,{variant:"h4",color:"purple",sx:{fontWeight:"bold"},children:W.toFixed(2)})]})})}),(0,p.jsx)(h.Ay,{item:!0,xs:12,md:6,children:(0,p.jsx)(i(),{highcharts:o(),options:M})}),(0,p.jsx)(h.Ay,{item:!0,xs:12,md:6,children:(0,p.jsx)(i(),{highcharts:o(),options:z})}),(0,p.jsx)(h.Ay,{item:!0,xs:12,md:6,children:(0,p.jsx)(i(),{highcharts:o(),options:E})}),(0,p.jsx)(h.Ay,{item:!0,xs:12,md:12,children:(0,p.jsx)(i(),{highcharts:o(),options:N})})]})]})]})}}}]);
//# sourceMappingURL=84607.fd366ef7.chunk.js.map