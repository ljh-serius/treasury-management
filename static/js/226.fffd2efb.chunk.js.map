{"version":3,"file":"static/js/226.fffd2efb.chunk.js","mappings":"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","sources":["components/Management/Entities.js","utils/firebaseCrudHelpers.js"],"sourcesContent":["import {\r\n    fetchDocuments,\r\n    addDocument,\r\n    updateDocument,\r\n    deleteDocument,\r\n    fetchDocumentsBySelectValue,\r\n    fetchDocumentsByFieldValue\r\n} from '../../utils/firebaseCrudHelpers';\r\n\r\nconst organizationId = JSON.parse(localStorage.getItem('userData')).organizationId;\r\n\r\nconst getEntitiesOptions = async (types) => {\r\n  return (await fetchEntities()).filter((entity) => {\r\n    return types.includes(entity.type);\r\n  }).map((entity) => {\r\n    return {\r\n      id: entity.id,\r\n      label: entity.name\r\n    }\r\n  });\r\n}\r\n\r\nexport const fieldsConfig = {\r\n  name: { label: 'name', type: 'text', faker: 'company.name' },\r\n  type: {\r\n    label: 'Manager ID',\r\n    type: 'select',\r\n    options: [\r\n      {\r\n        id: 'store',\r\n        label: 'Store'\r\n      },\r\n      {\r\n        id: 'agency',\r\n        label: 'Agency'\r\n      },\r\n      {\r\n        id: 'department',\r\n        label: 'Department'\r\n      },\r\n      {\r\n        id: 'service',\r\n        label: 'Service'\r\n      },\r\n    ],\r\n    multiple: false,\r\n    faker: 'random.arrayElement'\r\n  },\r\n  entityId: { label: 'Entity ID', type: 'text', faker: 'datatype.uuid' },\r\n  parentId: {\r\n    label: 'Parent Entity ID',\r\n    type: 'select',\r\n    options: await getEntitiesOptions(['store', 'agency', 'department', 'service']), // Populated with relevant parent entities\r\n    multiple: true,\r\n    faker: 'random.arrayElement'\r\n  },\r\n  storeId: {\r\n    label: 'Parent Entity ID',\r\n    type: 'select',\r\n    options: await getEntitiesOptions(['store']), // Populated with relevant parent entities\r\n    multiple: true,\r\n    faker: 'random.arrayElement'\r\n  },\r\n  agencyId: {\r\n    label: 'Parent Entity ID',\r\n    type: 'select',\r\n    options: await getEntitiesOptions(['agency']), // Populated with relevant parent entities\r\n    multiple: true,\r\n    faker: 'random.arrayElement'\r\n  },\r\n  departmentId: {\r\n    label: 'Parent Entity ID',\r\n    type: 'select',\r\n    options: await getEntitiesOptions(['department']), // Populated with relevant parent entities\r\n    multiple: true,\r\n    faker: 'random.arrayElement'\r\n  },\r\n  serviceId: {\r\n    label: 'Parent Entity ID',\r\n    type: 'select',\r\n    options: await getEntitiesOptions(['service']), // Populated with relevant parent entities\r\n    multiple: true,\r\n    faker: 'random.arrayElement'\r\n  },\r\n  locationId: { label: 'Location ID', type: 'text', faker: 'datatype.uuid' },\r\n  regionId: { label: 'Region ID', type: 'text', faker: 'datatype.uuid' },\r\n  countryId: { label: 'Country ID', type: 'text', faker: 'address.countryCode' },\r\n  managerId: {\r\n    label: 'Manager ID',\r\n    type: 'select',\r\n    options: [], // Populated with relevant managers\r\n    multiple: false,\r\n    faker: 'random.arrayElement'\r\n  },\r\n  status: {\r\n    label: 'Status',\r\n    type: 'select',\r\n    options: [\r\n      { id: 'active', label: 'Active' },\r\n      { id: 'inactive', label: 'Inactive' }\r\n    ],\r\n    faker: 'random.arrayElement'\r\n  },\r\n  creationDate: { label: 'Creation Date', type: 'date', faker: 'date.past' },\r\n  modifiedDate: { label: 'Modified Date', type: 'date', faker: 'date.recent' },\r\n  notes: { label: 'Notes', type: 'text', faker: 'lorem.paragraph' },\r\n};\r\n\r\nexport const headCells = Object.keys(fieldsConfig).map(key => ({\r\n  id: key,\r\n  label: fieldsConfig[key].label,\r\n}));\r\n\r\nexport const entityName = 'Entities';\r\n\r\nexport const fetchEntities = () => fetchDocuments(organizationId, 'entities');\r\nexport const addEntity = (item) => addDocument(organizationId, 'entities', item);\r\nexport const updateEntity = (id, item) => updateDocument(organizationId, 'entities', id, item);\r\nexport const deleteEntity = (id) => deleteDocument(organizationId, 'entities', id);\r\n","import { db } from './firebaseConfig'; // Assuming you have a Firebase config file\r\nimport { collection, getDocs, addDoc, updateDoc, deleteDoc, doc, query, where } from 'firebase/firestore';\r\n\r\n// Function to fetch documents specific to an organization from a subcollection\r\nexport const fetchDocuments = async (organizationId, subcollectionName) => {\r\n  try {\r\n    const subcollectionRef = collection(db, 'organizations', organizationId, subcollectionName);\r\n    const snapshot = await getDocs(subcollectionRef);\r\n    const documentsList = snapshot.docs.map(doc => ({ id: doc.id, ...doc.data() }));\r\n    return documentsList;\r\n  } catch (error) {\r\n    console.error(`Error fetching documents from ${subcollectionName}:`, error);\r\n    return [];\r\n  }\r\n};\r\n\r\n// Function to add a new document linked to an organization in a subcollection\r\nexport const addDocument = async (organizationId, subcollectionName, documentData) => {\r\n  try {\r\n    documentData.organizationId = organizationId;\r\n    const subcollectionRef = collection(db, 'organizations', organizationId, subcollectionName);\r\n    const docRef = await addDoc(subcollectionRef, documentData);\r\n    return docRef.id; // Return the ID of the newly created document\r\n  } catch (error) {\r\n    console.error(`Error adding document to ${subcollectionName}:`, error);\r\n    throw new Error(`Could not add document to ${subcollectionName}`);\r\n  }\r\n};\r\n\r\n// Function to update an existing document in a subcollection\r\nexport const updateDocument = async (organizationId, subcollectionName, documentId, documentData) => {\r\n  try {\r\n    const docRef = doc(db, 'organizations', organizationId, subcollectionName, documentId);\r\n    await updateDoc(docRef, documentData);\r\n  } catch (error) {\r\n    console.error(`Error updating document in ${subcollectionName}:`, error);\r\n    throw new Error(`Could not update document in ${subcollectionName}`);\r\n  }\r\n};\r\n\r\n// Function to delete a document from a subcollection\r\nexport const deleteDocument = async (organizationId, subcollectionName, documentId) => {\r\n  try {\r\n    const docRef = doc(db, 'organizations', organizationId, subcollectionName, documentId);\r\n    await deleteDoc(docRef);\r\n  } catch (error) {\r\n    console.error(`Error deleting document from ${subcollectionName}:`, error);\r\n    throw new Error(`Could not delete document from ${subcollectionName}`);\r\n  }\r\n};\r\n\r\n\r\nexport const fetchDocumentsBySelectValue = async (organizationId, relativeCollection, foreignKey, foreignValue) => {\r\n  try {\r\n    const subcollectionRef = collection(db, 'organizations', organizationId, relativeCollection);\r\n    \r\n    // Create a query against the collection\r\n    const q = query(subcollectionRef, where(foreignKey, 'array-contains', foreignValue));\r\n    \r\n    // Execute the query and get the documents\r\n    const snapshot = await getDocs(q);\r\n    const documentsList = snapshot.docs.map(doc => ({ id: doc.id, ...doc.data() }));\r\n\r\n    return documentsList;\r\n  } catch (error) {\r\n    console.error(`Error fetching documents from ${relativeCollection}:`, error);\r\n    return [];\r\n  }\r\n}\r\n\r\nexport const fetchDocumentsByFieldValue = async (organizationId, relativeCollection, fieldName, fieldValue) => {\r\n  try {\r\n    const subcollectionRef = collection(db, 'organizations', organizationId, relativeCollection);\r\n    \r\n    // Create a query against the collection\r\n    const q = query(subcollectionRef, where(fieldName, '==', fieldValue));\r\n    \r\n    // Execute the query and get the documents\r\n    const snapshot = await getDocs(q);\r\n    const documentsList = snapshot.docs.map(doc => ({ id: doc.id, ...doc.data() }));\r\n\r\n    return documentsList;\r\n  } catch (error) {\r\n    console.error(`Error fetching documents from ${relativeCollection}:`, error);\r\n    return [];\r\n  }\r\n}"],"names":["organizationId","JSON","parse","localStorage","getItem","getEntitiesOptions","async","fetchEntities","filter","entity","types","includes","type","map","id","label","name","fieldsConfig","faker","options","multiple","entityId","parentId","storeId","agencyId","departmentId","serviceId","locationId","regionId","countryId","managerId","status","creationDate","modifiedDate","notes","headCells","Object","keys","key","entityName","fetchDocuments","addEntity","item","addDocument","updateEntity","updateDocument","deleteEntity","deleteDocument","subcollectionName","subcollectionRef","collection","db","snapshot","getDocs","docs","doc","data","error","console","documentData","addDoc","Error","documentId","docRef","updateDoc","deleteDoc","fetchDocumentsBySelectValue","relativeCollection","foreignKey","foreignValue","q","query","where","fetchDocumentsByFieldValue","fieldName","fieldValue"],"sourceRoot":""}