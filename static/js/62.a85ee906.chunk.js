"use strict";(self.webpackChunktresorerie_management=self.webpackChunktresorerie_management||[]).push([[62],{9062:(e,t,i)=>{i.r(t),i.d(t,{default:()=>y});var s=i(5043),a=i(3488),n=i.n(a),r=i(4999),c=i.n(r),o=i(9252),l=i(6446),h=i(5865),m=i(8903),d=i(2110),p=i(6494),x=i(579);function y(e){let{fetchItems:t}=e;const[i,a]=(0,s.useState)([]),[r,y]=(0,s.useState)([]),[k,j]=(0,s.useState)([]),[u,b]=(0,s.useState)([]),[A,f]=(0,s.useState)([]),[v,g]=(0,s.useState)([]),[S,R]=(0,s.useState)("Safe"),[N,T]=(0,s.useState)(0),[w,I]=(0,s.useState)([]);(0,s.useEffect)((()=>{(async()=>{const e=await t();a(e),F(e)})()}),[t]);const F=e=>{const t=e.reduce(((e,t)=>(e[t.severity]=(e[t.severity]||0)+1,e)),{});y(Object.keys(t).map((i=>({name:i,y:t[i],riskNames:e.filter((e=>e.severity===i)).map((e=>e.riskName)).join(", ")}))));const i=e.reduce(((e,t)=>(e[t.riskType]=(e[t.riskType]||0)+1,e)),{});j(Object.keys(i).map((t=>({name:t,y:i[t],riskNames:e.filter((e=>e.riskType===t)).map((e=>e.riskName)).join(", ")}))));const s=e.reduce(((e,t)=>{const i=new Date(t.createdDate).getMonth()+1;return e[i]=(e[i]||0)+1,e}),{});b(Object.keys(s).map((e=>({name:`Month ${e}`,y:s[e]}))));const a=e.reduce(((e,t)=>{const i=Number(t.financialImpact)||0;return e.total+=i,e.breakdown.push({name:t.riskName,y:i}),e}),{total:0,breakdown:[]});T(a.total),f(a.breakdown);const n=e.reduce(((e,t)=>(e[t.owner]=(e[t.owner]||0)+1,e)),{});g(Object.keys(n).map((e=>({name:e,y:n[e]}))));const r=e.filter((e=>"High"===e.severity||"Critical"===e.severity));R(r.length>10?"Threatened":"Safe");const c=e.sort(((e,t)=>("Critical"===t.severity?1:0)-("Critical"===e.severity?1:0)||(Number(t.financialImpact)||0)-(Number(e.financialImpact)||0))).slice(0,5);I(c)},O={chart:{type:"pie"},title:{text:"Risk Severity Distribution"},tooltip:{pointFormat:"{point.name}: <b>{point.y}</b><br/>Risks: {point.riskNames}"},series:[{name:"Risks",colorByPoint:!0,data:r}]},D={chart:{type:"pie"},title:{text:"Risk Type Distribution"},tooltip:{pointFormat:"{point.name}: <b>{point.y}</b><br/>Risks: {point.riskNames}"},series:[{name:"Risks",colorByPoint:!0,data:k}]},C={chart:{type:"line"},title:{text:"Risk Trends Over Time"},xAxis:{categories:u.map((e=>e.name))},series:[{name:"Number of Risks",data:u.map((e=>e.y))}]},B={chart:{type:"column"},title:{text:"Financial Impact of Risks"},tooltip:{pointFormat:"<b>{point.name}</b>: ${point.y:.2f}"},series:[{name:"Financial Impact",data:A}]},$={chart:{type:"bar"},title:{text:"Risk Ownership Distribution"},series:[{name:"Risks",data:v}]};return(0,x.jsx)(o.A,{maxWidth:"xl",sx:{paddingTop:3,paddingBottom:7},children:(0,x.jsxs)(l.A,{sx:{padding:4},children:[(0,x.jsx)(h.A,{variant:"h4",gutterBottom:!0,children:"Risk Analysis Dashboard"}),(0,x.jsxs)(m.Ay,{container:!0,spacing:4,children:[(0,x.jsx)(m.Ay,{item:!0,xs:12,md:4,children:(0,x.jsx)(d.A,{children:(0,x.jsxs)(p.A,{children:[(0,x.jsx)(h.A,{variant:"h6",children:"Overall Risk Level"}),(0,x.jsx)(h.A,{variant:"h4",color:"Safe"===S?"green":"red",sx:{fontWeight:"bold"},children:S}),(0,x.jsx)(h.A,{variant:"body2",children:"Safe"===S?"The company is currently in a safe state with manageable risks.":"The company is threatened by high or critical risks."})]})})}),(0,x.jsx)(m.Ay,{item:!0,xs:12,md:4,children:(0,x.jsx)(d.A,{children:(0,x.jsxs)(p.A,{children:[(0,x.jsx)(h.A,{variant:"h6",children:"Total Financial Impact"}),(0,x.jsxs)(h.A,{variant:"h4",color:"blue",sx:{fontWeight:"bold"},children:["$",N.toFixed(2)]}),(0,x.jsx)(h.A,{variant:"body2",children:"This represents the total financial exposure due to identified risks."})]})})}),(0,x.jsx)(m.Ay,{item:!0,xs:12,md:4,children:(0,x.jsx)(d.A,{children:(0,x.jsxs)(p.A,{children:[(0,x.jsx)(h.A,{variant:"h6",children:"Top 5 Risks"}),(0,x.jsx)("ol",{children:w.map((e=>(0,x.jsx)("li",{children:(0,x.jsxs)(h.A,{variant:"body2",children:[e.riskName," - Severity: ",e.severity," - Impact: $",Number(e.financialImpact||0).toFixed(2)]})},e.riskId)))})]})})}),(0,x.jsx)(m.Ay,{item:!0,xs:12,md:6,children:(0,x.jsx)(c(),{highcharts:n(),options:O})}),(0,x.jsx)(m.Ay,{item:!0,xs:12,md:6,children:(0,x.jsx)(c(),{highcharts:n(),options:D})}),(0,x.jsx)(m.Ay,{item:!0,xs:12,md:12,children:(0,x.jsx)(c(),{highcharts:n(),options:C})}),(0,x.jsx)(m.Ay,{item:!0,xs:12,md:12,children:(0,x.jsx)(c(),{highcharts:n(),options:B})}),(0,x.jsx)(m.Ay,{item:!0,xs:12,md:12,children:(0,x.jsx)(c(),{highcharts:n(),options:$})})]})]})})}}}]);
//# sourceMappingURL=62.a85ee906.chunk.js.map