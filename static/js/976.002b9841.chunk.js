"use strict";(self.webpackChunktresorerie_management=self.webpackChunktresorerie_management||[]).push([[976],{1976:(e,t,i)=>{i.r(t),i.d(t,{default:()=>u});var n=i(5043),s=i(3488),o=i.n(s),a=i(4999),r=i.n(a),c=i(9252),d=i(6446),l=i(5865),h=i(8903),m=i(2110),p=i(6494),x=i(579);function u(e){let{fetchInvoices:t}=e;const[i,s]=(0,n.useState)([]),[a,u]=(0,n.useState)([]),[v,y]=(0,n.useState)([]),[j,b]=(0,n.useState)([]),[A,g]=(0,n.useState)([]),[f,T]=(0,n.useState)([]),[I,N]=(0,n.useState)(0),[D,V]=(0,n.useState)(0);(0,n.useEffect)((()=>{(async()=>{const e=await t();s(e),k(e)})()}),[t]);const k=e=>{const t=e.reduce(((e,t)=>(e[t.invoiceType]=(e[t.invoiceType]||0)+1,e)),{});u(Object.keys(t).map((i=>({name:i,y:t[i],invoiceNames:e.filter((e=>e.invoiceType===i)).map((e=>e.providerDetails)).join(", ")}))));const i=e.reduce(((e,t)=>(e[t.invoiceCategory]=(e[t.invoiceCategory]||0)+1,e)),{});y(Object.keys(i).map((t=>({name:t,y:i[t],invoiceNames:e.filter((e=>e.invoiceCategory===t)).map((e=>e.providerDetails)).join(", ")}))));const n=e.reduce(((e,t)=>(e[t.paymentMethod]=(e[t.paymentMethod]||0)+1,e)),{});b(Object.keys(n).map((t=>({name:t,y:n[t],invoiceNames:e.filter((e=>e.paymentMethod===t)).map((e=>e.providerDetails)).join(", ")}))));const s=e.reduce(((e,t)=>{const i=new Date(t.issuedAt).getMonth()+1;return e[i]=(e[i]||0)+1,e}),{});g(Object.keys(s).map((e=>({name:`Month ${e}`,y:s[e]}))));const o=e.reduce(((e,t)=>{const i=Number(t.contractValue)||0;return"issued"===t.invoiceType?e.issued+=i:e.received+=i,e}),{issued:0,received:0});N(o.issued),V(o.received);const a=e.sort(((e,t)=>Number(t.contractValue)-Number(e.contractValue))).slice(0,5);T(a)},M={chart:{type:"pie"},title:{text:"Invoice Type Distribution"},tooltip:{pointFormat:"{point.name}: <b>{point.y}</b><br/>Providers: {point.invoiceNames}"},series:[{name:"Invoices",colorByPoint:!0,data:a}]},S={chart:{type:"pie"},title:{text:"Invoice Category Distribution"},tooltip:{pointFormat:"{point.name}: <b>{point.y}</b><br/>Providers: {point.invoiceNames}"},series:[{name:"Categories",colorByPoint:!0,data:v}]},C={chart:{type:"column"},title:{text:"Payment Method Distribution"},tooltip:{pointFormat:"{point.name}: <b>{point.y}</b> invoices"},series:[{name:"Payment Methods",data:j}]},F={chart:{type:"line"},title:{text:"Monthly Invoice Trends"},xAxis:{categories:A.map((e=>e.name))},series:[{name:"Number of Invoices",data:A.map((e=>e.y))}]};return(0,x.jsx)(c.A,{maxWidth:"xl",sx:{paddingTop:3,paddingBottom:7},children:(0,x.jsxs)(d.A,{sx:{padding:4},children:[(0,x.jsx)(l.A,{variant:"h4",gutterBottom:!0,children:"Invoice Analysis Dashboard"}),(0,x.jsxs)(h.Ay,{container:!0,spacing:4,children:[(0,x.jsx)(h.Ay,{item:!0,xs:12,md:4,children:(0,x.jsx)(m.A,{children:(0,x.jsxs)(p.A,{children:[(0,x.jsx)(l.A,{variant:"h6",children:"Total Issued Invoice Value"}),(0,x.jsxs)(l.A,{variant:"h4",color:"green",sx:{fontWeight:"bold"},children:["$",I.toFixed(2)]}),(0,x.jsx)(l.A,{variant:"body2",children:"This represents the total value of all issued invoices."})]})})}),(0,x.jsx)(h.Ay,{item:!0,xs:12,md:4,children:(0,x.jsx)(m.A,{children:(0,x.jsxs)(p.A,{children:[(0,x.jsx)(l.A,{variant:"h6",children:"Total Received Invoice Value"}),(0,x.jsxs)(l.A,{variant:"h4",color:"blue",sx:{fontWeight:"bold"},children:["$",D.toFixed(2)]}),(0,x.jsx)(l.A,{variant:"body2",children:"This represents the total value of all received invoices."})]})})}),(0,x.jsx)(h.Ay,{item:!0,xs:12,md:4,children:(0,x.jsx)(m.A,{children:(0,x.jsxs)(p.A,{children:[(0,x.jsx)(l.A,{variant:"h6",children:"Top 5 Vendors by Invoice Value"}),(0,x.jsx)("ol",{children:f.map((e=>(0,x.jsx)("li",{children:(0,x.jsxs)(l.A,{variant:"body2",children:[e.providerDetails," - Value: $",Number(e.contractValue).toFixed(2)]})},e.id)))})]})})}),(0,x.jsx)(h.Ay,{item:!0,xs:12,md:6,children:(0,x.jsx)(r(),{highcharts:o(),options:M})}),(0,x.jsx)(h.Ay,{item:!0,xs:12,md:6,children:(0,x.jsx)(r(),{highcharts:o(),options:S})}),(0,x.jsx)(h.Ay,{item:!0,xs:12,md:6,children:(0,x.jsx)(r(),{highcharts:o(),options:C})}),(0,x.jsx)(h.Ay,{item:!0,xs:12,md:6,children:(0,x.jsx)(r(),{highcharts:o(),options:F})})]})]})})}}}]);
//# sourceMappingURL=976.002b9841.chunk.js.map